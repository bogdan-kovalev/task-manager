<!DOCTYPE html>
<html ng-app="app">
<head>
    <meta charset="utf-8">
    <title ng-bind="customAppTitle != null ? customAppTitle : defaultAppTitle || 'Todo List'"></title>

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
</head>

<body>

<!--libraries-->
<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.3.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script type="text/javascript" src="http://underscorejs.org/underscore.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.js"></script>

<!-- Include -->
<script type="text/javascript" src="script/service/tasklist-back.js"></script>
<script type="text/javascript" src="script/controller/tasklist-front.js"></script>
<script type="text/javascript" src="./script/app.js"></script>
<script type="text/javascript" src="script/utils.js"></script>

<div class="widget" ng-controller="widgetController">

    <form name="newTaskForm" novalidate ng-submit="addTask();">
        <div class="new-task">
            <textarea required ng-model='description' name="description" class="task-txt new-task-txt" rows=1
                  placeholder="Enter your task description"></textarea>

            <input ng-model='assignee' class='assign inline-edit' placeholder="Assign to">

            <input type="submit" class="btn new-task-btn"
                   ng-disabled="newTaskForm.description.$invalid">
        </div>
    </form>

    <div class="widget-properties">
        <input type="checkbox" id="only-assigned-checkbox"/>
        <label for="only-assigned-checkbox"><b>My tasks assigned to others</b></label>
    </div>
    <div class="task-items-wrapper">
        <div ng-show='items.length == 0' class="no-tasks">There are no tasks available to you yet</div>

        <div ng-repeat="item in items" class="task-item {{item.task.status}}" id="{{item.task.id}}">
            <div class="task-properties ui-widget">
                {{item.task.creationDate.toLocaleDateString()+" "+item.task.creationDate.toLocaleTimeString()}}
                <span><b>Assigned to:</b></span>
                <input ng-show="item.access.edit" class='assign inline-edit' placeholder="Assign to"
                       value="{{item.task.assignee !== item.task.author ? item.task.assignee : ''}}">
                <a ng-show="item.access.edit" class="btn assign-btn">
                    <span>Assign</span>
                </a>
            </div>
            <textarea class="inline-edit" rows=1 ng-readonly="!item.access.edit">
                {{item.task.description}}
            </textarea>
            <a ng-click="deleteTask(item.task.id)" ng-show="item.access.delete" class="btn delete-btn">
                <span>Delete</span>
            </a>
            <a ng-click="" ng-show="item.access.edit" class="btn save-btn">
                <span>Save</span>
            </a>
            <a ng-click="" ng-show="item.access.edit" class="btn cancel-btn">
                <span>Cancel</span>
            </a>
            <a ng-click="finishTask(item.task.id)" ng-show="item.access.finish" class="btn finish-btn">
                <span>Finish</span>
            </a>
            <a ng-click="reopenTask(item.task.id)" ng-show="item.access.reopen" class="btn reopen-btn">
                <span>Re-open</span>
            </a>
        </div>

    </div>
</div>

</body>
</html>